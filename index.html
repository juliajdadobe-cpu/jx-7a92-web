<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é Java</title>

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Inter, sans-serif;
      background: #f5f6f8;
      color: #1f2937;
      line-height: 1.5;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 12px;
    }

    /* ===== SEARCH ===== */

    .search-wrapper {
      position: relative;
      margin-bottom: 12px;
    }

    .search {
      width: 100%;
      padding: 12px 42px 12px 14px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font-size: 1rem;
    }

    .search-wrapper button {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      background: transparent;
      font-size: 18px;
      cursor: pointer;
      color: #9ca3af;
      display: none;
    }

    .search-wrapper button:hover {
      color: #374151;
    }

    /* ===== TOP ACTION ===== */

    .top-actions {
      margin-bottom: 12px;
    }

    .top-actions button {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      cursor: pointer;
      font-size: 1.05rem;
      font-weight: 600;
    }

    .top-actions button:hover {
      background: #eef2f7;
    }

    /* ===== CHAPTERS ===== */

    .chapter {
      background: #ffffff;
      border-radius: 12px;
      margin-bottom: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      overflow: hidden;
    }

    .chapter-header {
      padding: 18px 20px;
      font-size: 1.15rem;
      font-weight: 600;
      background: #eef2f7;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .questions {
      display: none;
    }

    .question {
      padding: 12px 16px;
      border-top: 1px solid #e5e7eb;
    }

    .question-title {
      font-weight: 500;
      margin-bottom: 6px;
      cursor: pointer;
    }

    .answer {
      display: none;
      font-size: 0.95rem;
      color: #374151;
    }

    /* ===== RANDOM MODE ===== */

    .random-mode {
      display: none;
      background: #ffffff;
      border-radius: 14px;
      padding: 22px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .random-chapter {
      display: inline-block;
      margin-bottom: 14px;
      padding: 6px 14px;
      font-size: 0.9rem;
      border-radius: 999px;
      background: #eef2f7;
      color: #374151;
    }

    .random-question {
      font-size: 1.15rem;
      font-weight: 700;
      margin-bottom: 14px;
      cursor: pointer;
    }

    .random-answer {
      display: none;
      font-size: 1rem;
      color: #374151;
      margin-bottom: 20px;
    }

    .random-actions button {
      width: 100%;
      padding: 16px;
      border-radius: 14px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      cursor: pointer;
      font-size: 1.05rem;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .random-actions button:hover {
      background: #eef2f7;
    }

    /* ===== STATS ===== */

    .stats {
      margin-top: 20px;
      text-align: center;
      font-size: 0.95rem;
      color: #6b7280;
    }

    /* ===== FLOATING ACTIONS ===== */

    .floating-actions {
      position: fixed;
      right: 16px;
      bottom: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
    }

    .floating-actions.hidden {
      display: none;
    }

    .floating-actions button {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: none;
      background: #e5e7eb;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    }

    .floating-actions button:hover {
      background: #d1d5db;
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.4rem; }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Java</h1>

    <div class="top-actions">
      <button id="randomModeBtn">üé≤ –°–ª—É—á–∞–π–Ω—ã–π –≤–æ–ø—Ä–æ—Å</button>
    </div>

    <div id="searchWrapper" class="search-wrapper">
      <input id="searchInput" class="search" type="text" placeholder="–ü–æ–∏—Å–∫" />
      <button id="clearSearch">‚úï</button>
    </div>

    <div id="content"></div>
    <div id="randomMode" class="random-mode"></div>
    <div id="stats" class="stats"></div>
  </div>

  <div id="floatingActions" class="floating-actions">
    <button id="scrollTopBtn" title="–ù–∞–≤–µ—Ä—Ö">‚¨ÜÔ∏è</button>
    <button id="collapseAllBtn" title="–°–≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë">üßπ</button>
  </div>

  <script>
    const BASE_URL = "https://raw.githubusercontent.com/juliajdadobe-cpu/jx-7a92-data/main/";

    const TOPICS = [
      { title: "Java Core", file: "Java_Core.json" },
      { title: "–û–û–ü", file: "OOP.json" },
      { title: "–ò—Å–∫–ª—é—á–µ–Ω–∏—è", file: "Exceptions.json" },
      { title: "–ö–æ–ª–ª–µ–∫—Ü–∏–∏", file: "Collections.json" },
      { title: "–î–∂–µ–Ω–µ—Ä–∏–∫–∏", file: "Generics.json" },
      { title: "Stream API", file: "java-stream-api.json" },
      { title: "–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å", file: "multithreading.json" },
      { title: "JVM / GC / Memory", file: "jvm_gc_memory.json" },
      { title: "Java IO / NIO", file: "java_io_nio.json" },
      { title: "HTTP", file: "http.json" },
      { title: "SQL / –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö", file: "sql_databases.json" },
      { title: "JDBC / JPA / Hibernate", file: "jdbc_jpa_hibernate.json" },
      { title: "Spring / Spring Boot", file: "spring_spring_boot.json" },
      { title: "Spring MVC / Web / Security", file: "spring_mvc_web_security.json" },
      { title: "Kafka / Messaging", file: "kafka_messaging.json" },
      { title: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ / –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã", file: "architecture_microservices.json" },
      { title: "DevOps / Docker / Kubernetes", file: "devops_docker_kubernetes.json" },
      { title: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", file: "performance_observability.json" },
      { title: "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ", file: "testing_spring_junit.json" }
    ];

    let data = {};

    const content = document.getElementById('content');
    const randomMode = document.getElementById('randomMode');
    const searchWrapper = document.getElementById('searchWrapper');
    const floatingActions = document.getElementById('floatingActions');

    async function loadAllTopics() {
      for (const topic of TOPICS) {
        const res = await fetch(BASE_URL + topic.file);
        const json = await res.json();
        data[topic.title] = Object.values(json)[0];
      }
      render();
      updateStats();
    }

    function render(filter = '') {
      content.innerHTML = '';
      Object.entries(data).forEach(([chapterName, questions]) => {
        const filtered = questions.filter(q =>
          (q.question + q.answer).toLowerCase().includes(filter)
        );
        if (!filtered.length) return;

        const chapter = document.createElement('div');
        chapter.className = 'chapter';

        const header = document.createElement('div');
        header.className = 'chapter-header';
        header.innerHTML = `<span>${chapterName}</span><span class="arrow">‚ñ∏</span>`;

        const list = document.createElement('div');
        list.className = 'questions';

        filtered.forEach((item, index) => {
          const q = document.createElement('div');
          q.className = 'question';

          const title = document.createElement('div');
          title.className = 'question-title';
          title.textContent = `${index + 1}. ${item.question}`;

          const answer = document.createElement('div');
          answer.className = 'answer';
          answer.textContent = item.answer;

          title.onclick = () =>
            answer.style.display = answer.style.display === 'block' ? 'none' : 'block';

          q.append(title, answer);
          list.appendChild(q);
        });

        header.onclick = () => {
          const open = list.style.display === 'block';
          list.style.display = open ? 'none' : 'block';
          header.querySelector('.arrow').textContent = open ? '‚ñ∏' : '‚ñæ';
          if (open) list.querySelectorAll('.answer').forEach(a => a.style.display = 'none');
        };

        chapter.append(header, list);
        content.appendChild(chapter);
      });
    }

    function updateStats() {
      let total = 0;
      Object.values(data).forEach(arr => total += arr.length);
      document.getElementById('stats').textContent = `–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤: ${total}`;
    }

    function enterRandomMode() {
      content.style.display = 'none';
      searchWrapper.style.display = 'none';
      floatingActions.classList.add('hidden');
      randomMode.style.display = 'block';
      showRandomQuestion();
    }

    function exitRandomMode() {
      randomMode.style.display = 'none';
      content.style.display = 'block';
      searchWrapper.style.display = 'block';
      floatingActions.classList.remove('hidden');
    }

    function showRandomQuestion() {
      const all = [];
      Object.entries(data).forEach(([chapter, questions]) =>
        questions.forEach(q => all.push({ ...q, chapter }))
      );

      const q = all[Math.floor(Math.random() * all.length)];

      randomMode.innerHTML = `
        <div class="random-chapter">${q.chapter}</div>
        <div class="random-question">${q.question}</div>
        <div class="random-answer">${q.answer}</div>
        <div class="random-actions">
          <button onclick="showRandomQuestion()">üîÑ –ï—â—ë –≤–æ–ø—Ä–æ—Å</button>
          <button onclick="exitRandomMode()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
        </div>
      `;

      randomMode.querySelector('.random-question').onclick = () => {
        const a = randomMode.querySelector('.random-answer');
        a.style.display = a.style.display === 'block' ? 'none' : 'block';
      };
    }

    document.getElementById('randomModeBtn').onclick = enterRandomMode;

    document.getElementById('scrollTopBtn').onclick =
      () => window.scrollTo({ top: 0, behavior: 'smooth' });

    document.getElementById('collapseAllBtn').onclick = () => {
      document.querySelectorAll('.questions').forEach(q => q.style.display = 'none');
      document.querySelectorAll('.answer').forEach(a => a.style.display = 'none');
      document.querySelectorAll('.arrow').forEach(a => a.textContent = '‚ñ∏');
    };

    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');

    searchInput.oninput = e => {
      const value = e.target.value.toLowerCase();
      clearSearch.style.display = value ? 'block' : 'none';
      render(value);
    };

    clearSearch.onclick = () => {
      searchInput.value = '';
      clearSearch.style.display = 'none';
      render('');
    };

    loadAllTopics();
  </script>
</body>
</html>
